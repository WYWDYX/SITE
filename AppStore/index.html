<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WYWDYX STORE - 应用商店</title>
  <link rel="icon" type="image/svg" href="../Assets/Images/Logo - Square.svg" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7" />
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#0b0d10" />
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@200..900&display=swap" rel="stylesheet" />
  <style>
    /* ===== 颜色变量系统 ===== */
    :root {
      --color-bg: #fff;
      --color-text: #222;
      --color-border: #000;
      --color-accent: #f00;

      --color-header-bg: #fff;
      --color-card-bg: #fff;
      --color-footer-bg: #fff;
      --color-tag-bg: #000;
      --color-tag-text: #fff;

      --color-btn-bg: #000;
      --color-btn-text: #fff;
      --color-btn-hover-bg: #fff;
      --color-btn-hover-text: #000;

      --color-selection-fg: #fff;
      --color-selection-bg: #f00;

      --color-glow-text: #f00;
      --color-glow-light: #ff4040;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --color-bg: #0f1115;
        --color-text: #fff;
        --color-border: #fff;
        --color-accent: #ff4040;

        --color-header-bg: #0f1115;
        --color-card-bg: #111318;
        --color-footer-bg: #0f1115;
        --color-tag-bg: #fff;
        --color-tag-text: #111318;

        --color-btn-bg: #fff;
        --color-btn-text: #111318;
        --color-btn-hover-bg: transparent;
        --color-btn-hover-text: #fff;

        --color-selection-fg: #111318;
        --color-selection-bg: #ff7070;

        --color-glow-text: #f00;
        --color-glow-light: #ff4040;
      }
    }

    /* ===== 基础样式 ===== */
    * {
      scroll-behavior: smooth;
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Noto Sans SC", sans-serif;
      color: var(--color-text);
      background: var(--color-bg);
      overflow-x: hidden;
    }

    ::selection {
      color: var(--color-selection-fg);
      background: var(--color-selection-bg);
    }

    a,
    button {
      -webkit-tap-highlight-color: transparent;
    }

    a {
      text-decoration: none;
      color: var(--color-text);
    }

    /* 让锚点在有 sticky 头部时不会被遮挡 */
    :is(section, h2, .anchor-target) {
      scroll-margin-top: 88px;
    }

    /* ===== 布局组件 ===== */
    header {
      position: sticky;
      top: 0;
      z-index: 30;
      background: var(--color-header-bg);
      border-bottom: 3px solid var(--color-border);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      animation: headerDrop 0.6s ease-out forwards;
      -webkit-user-select: none;
      user-select: none;
    }

    header .container {
      max-width: 1200px;
      margin: auto;
      padding: 0 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 60px;
    }

    header nav {
      white-space: nowrap;
    }

    header nav a {
      position: relative;
      margin: 0 0.5rem;
      font-weight: 700;
      font-family: "Noto Sans SC", sans-serif;
      padding-bottom: 4px;
    }

    header nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      height: 2px;
      width: 0;
      background: var(--color-border);
      transition: width 0.3s ease;
    }

    header nav a:hover::after {
      width: 100%;
    }

    /* 按钮样式 */
    .btn-primary {
      background: var(--color-btn-bg);
      border: 2px solid var(--color-border);
      color: var(--color-btn-text);
      padding: 0.5rem 1.5rem;
      cursor: pointer;
      font-weight: 700;
      font-family: "Noto Sans SC", serif;
      text-transform: uppercase;
      transition: all 0.2s;
      white-space: nowrap;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      -webkit-user-select: none;
      user-select: none;
    }

    .btn-primary:hover {
      background: var(--color-btn-hover-bg);
      color: var(--color-btn-hover-text);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .btn-primary:active {
      transform: translateY(2px);
    }

    #btn-primary-red {
      background: var(--color-accent);
      color: #fff;
      box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
    }

    #btn-primary-red:hover {
      background: #fff;
      color: var(--color-accent);
      box-shadow: 0 10px 25px rgba(255, 0, 0, 0.4);
    }

    /* 主页特定样式 */
    .hero {
      position: relative;
      padding: 4rem 1rem;
      margin-bottom: 3rem;
      overflow: hidden;
      min-height: 520px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hero-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      opacity: 0;
      transition: opacity 1.2s ease-in-out;
      z-index: 1;
    }

    .hero-bg.active {
      opacity: 1;
    }

    .hero-bg::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3), var(--color-bg));
    }

    .hero-content {
      position: relative;
      z-index: 2;
      text-align: center;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
      padding: 0 1rem;
    }

    .hero h1 {
      font-family: "IBM3270", sans-serif;
      font-size: 3.5rem;
      margin-bottom: 1rem;
      border: none;
      text-align: center;
      color: #fff;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease;
    }

    .hero h1.active {
      opacity: 1;
      transform: translateY(0);
    }

    .hero p {
      font-size: 1.2rem;
      max-width: 600px;
      margin: 0 auto 2rem;
      color: #fff;
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.8s ease 0.2s;
      text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
    }

    .hero p.active {
      opacity: 0.9;
      transform: translateY(0);
    }

    .hero-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      padding: 2rem;
      max-width: 800px;
      margin: 0 auto;
      color: #fff;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease 0.4s, transform 0.8s ease 0.4s;
      will-change: height, transform;
      border-radius: 0; /* 保持原风格 */
    }

    .hero-card.active {
      opacity: 1;
      transform: translateY(0);
    }

    .hero-app {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .hero-app-icon {
      width: 80px;
      height: 80px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      object-fit: cover;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transform: scale(0.8);
      transition: all 0.6s ease 0.6s;
    }

    .hero-app-icon.active {
      opacity: 1;
      transform: scale(1);
    }

    .hero-app-info {
      opacity: 0;
      transform: translateX(-20px);
      transition: all 0.6s ease 0.8s;
    }

    .hero-app-info.active {
      opacity: 1;
      transform: translateX(0);
    }

    .hero-app-info h2 {
      margin: 0 0 0.5rem;
      font-family: "IBM3270", sans-serif;
      font-size: 2rem;
    }

    .hero-app-info p {
      margin: 0;
      opacity: 0.9;
      transform: none;
    }

    .hero-app-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.6s ease 1s;
    }

    .hero-app-actions.active {
      opacity: 1;
      transform: translateY(0);
    }

    .hero-nav {
      display: flex;
      justify-content: center;
      margin-top: 2rem;
      gap: 0.5rem;
    }

    .hero-nav-btn {
      width: 12px;
      height: 12px;
      background: rgba(255, 255, 255, 0.5);
      border: none;
      cursor: pointer;
      transition: all 0.3s;
    }

    .hero-nav-btn.active {
      background: var(--color-accent);
      transform: scale(1.2);
    }

    .search-container {
      max-width: 600px;
      margin: 2rem auto 3rem;
      position: relative;
    }

    .search-box {
      width: 100%;
      padding: 1rem 1.5rem;
      border: 3px solid var(--color-border);
      background: var(--color-card-bg);
      color: var(--color-text);
      font-family: "Noto Sans SC", sans-serif;
      font-size: 1rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    .search-box:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--color-accent);
    }

    .categories {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
      margin: 0 auto 1.5rem;
      padding: 0 1rem;
      max-width: 1200px;
    }

    .category-btn {
      background: var(--color-card-bg);
      border: 2px solid var(--color-border);
      color: var(--color-text);
      padding: 0.5rem 1.5rem;
      cursor: pointer;
      font-weight: 600;
      font-family: "Noto Sans SC", sans-serif;
      transition: all 0.2s;
    }

    .category-btn.active,
    .category-btn:hover {
      background: var(--color-accent);
      color: #fff;
    }

    .section-title {
      font-family: "IBM3270", sans-serif;
      font-size: 2rem;
      margin: 3rem 0 1.5rem;
      padding-left: 1rem;
      border-left: 5px solid var(--color-accent);
    }

    .apps-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 2.5rem 2rem;
      max-width: 1200px;
      margin: 0 auto 4rem;
      padding: 0 1rem;
    }

    .app-card {
      background: var(--color-card-bg);
      border: 3px solid var(--color-border);
      padding: 1.5rem;
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.4s ease;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      display: flex;
      flex-direction: column;
      height: 100%;
      opacity: 0;
      transform: translateY(24px);
    }

    .app-card.show {
      opacity: 1;
      transform: translateY(0);
    }

    .app-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
    }

    .app-icon {
      width: 64px;
      height: 64px;
      border: 3px solid var(--color-border);
      margin-bottom: 1rem;
      object-fit: cover;
    }

    .app-title {
      font-family: "IBM3270", sans-serif;
      font-size: 1.5rem;
      margin: 0 0 0.5rem;
    }

    .app-description {
      color: var(--color-text);
      opacity: 0.8;
      flex-grow: 1;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .app-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .app-tag {
      background: var(--color-tag-bg);
      color: var(--color-tag-text);
      padding: 0.25rem 0.75rem;
      font-size: 0.8rem;
      font-weight: 700;
    }

    .app-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .app-details-btn {
      background: transparent;
      border: 2px solid var(--color-border);
      color: var(--color-text);
      padding: 0.5rem 1rem;
      font-family: "Noto Sans SC", sans-serif;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .app-details-btn:hover {
      background: var(--color-border);
      color: var(--color-bg);
    }

    .app-download-btn {
      background: var(--color-accent);
      color: #fff;
      border: 2px solid var(--color-border);
      padding: 0.5rem 1rem;
      font-family: "Noto Sans SC", sans-serif;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .app-download-btn:hover {
      background: #fff;
      color: var(--color-accent);
    }

    .new-releases-wrap {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 3.5rem; /* 给左右按钮留空间 */
    }

    .new-releases {
      display: flex;
      overflow-x: auto;
      gap: 1.5rem;
      padding: 1rem;
      margin-bottom: 3rem;
      scrollbar-width: thin;
      scroll-snap-type: x mandatory;
      scroll-behavior: smooth;
    }

    .new-releases::-webkit-scrollbar {
      height: 8px;
    }

    .new-releases::-webkit-scrollbar-thumb {
      background: var(--color-border);
    }

    .new-app {
      flex: 0 0 300px;
      background: var(--color-card-bg);
      border: 2px solid var(--color-border);
      padding: 1.5rem;
      display: flex;
      gap: 1rem;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transform: translateX(50px);
      transition: opacity 0.6s ease, transform 0.6s ease;
      scroll-snap-align: start;
    }

    .new-app.active {
      opacity: 1;
      transform: translateX(0);
    }

    .new-app-icon {
      width: 50px;
      height: 50px;
      border: 2px solid var(--color-border);
      object-fit: cover;
    }

    .new-app-info {
      flex-grow: 1;
    }

    .new-app-title {
      font-family: "IBM3270", sans-serif;
      font-size: 1.2rem;
      margin: 0 0 0.25rem;
    }

    .new-app-category {
      font-size: 0.85rem;
      opacity: 0.7;
      margin: 0 0 0.5rem;
    }

    .new-app-download {
      background: var(--color-accent);
      color: #fff;
      border: none;
      padding: 0.4rem 0.8rem;
      font-size: 0.9rem;
      cursor: pointer;
    }

    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      border: 2px solid var(--color-border);
      background: var(--color-card-bg);
      cursor: pointer;
      font-weight: 700;
    }

    .carousel-btn.prev {
      left: 0.5rem;
    }

    .carousel-btn.next {
      right: 0.5rem;
    }

    .editor-choice {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      max-width: 1200px;
      margin: 0 auto 1rem;
      padding: 0 1rem;
    }

    .editor-card {
      background: var(--color-card-bg);
      border: 3px solid var(--color-border);
      padding: 2rem;
      display: flex;
      gap: 1.5rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .editor-card.active {
      opacity: 1;
      transform: translateY(0);
    }

    .editor-app-icon {
      width: 70px;
      height: 70px;
      border: 3px solid var(--color-border);
      object-fit: cover;
    }

    .editor-app-info h3 {
      font-family: "IBM3270", sans-serif;
      font-size: 1.5rem;
      margin: 0 0 0.5rem;
    }

    .editor-app-info p {
      margin: 0 0 1rem;
      opacity: 0.8;
    }

    footer {
      border-top: 3px solid var(--color-border);
      text-align: center;
      padding: 0.5rem;
      font-size: 1.2rem;
      color: var(--color-text);
      background: var(--color-footer-bg);
      font-family: IBM3270, system-ui, sans-serif;
      box-shadow: 0 -10px 25px rgba(0, 0, 0, 0.2);
    }

    /* ===== 动画系统 ===== */
    @keyframes headerDrop {
      from {
        transform: translateY(-100%);
        box-shadow: none;
      }
      to {
        transform: translateY(0);
      }
    }

    @keyframes sectionRise {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes tagSlide {
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes iconPop {
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* ===== 滚动进入动画 ===== */
    .scroll-hidden {
      opacity: 0;
      transform: translateY(20px);
    }

    .scroll-show {
      animation: sectionRise 0.6s ease-out forwards;
    }

    .tag-hidden {
      opacity: 0;
      transform: translateX(-15px);
    }

    .tag-show {
      animation: tagSlide 0.4s ease-out forwards;
      animation-delay: var(--delay, 0s);
    }

    .icon-hidden {
      transform: scale(0);
      opacity: 0;
    }

    .icon-show {
      animation: iconPop 0.4s cubic-bezier(0.25, 1.3, 0.5, 1) forwards;
      animation-delay: var(--delay, 0s);
    }

    /* ===== 页面加载动画 ===== */
    #page-loader {
      position: fixed;
      inset: 0;
      background: var(--color-bg);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.6s ease, visibility 0.6s ease;
    }

    .loader {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(0, 0, 0, 0.1);
      border-top-color: var(--color-accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    #page-loader.hidden {
      opacity: 0;
      visibility: hidden;
    }

    /* ===== 暗色模式阴影调整 ===== */
    @media (prefers-color-scheme: dark) {
      header {
        box-shadow: 0 10px 25px rgba(255, 255, 255, 0.15);
      }

      .app-card {
        box-shadow: 0 10px 20px rgba(255, 255, 255, 0.15);
      }

      .app-card:hover {
        box-shadow: 0 15px 30px rgba(255, 255, 255, 0.25);
      }

      .btn-primary {
        box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
      }

      .btn-primary:hover {
        box-shadow: 0 8px 20px rgba(255, 255, 255, 0.3);
      }

      #btn-primary-red {
        box-shadow: 0 5px 15px rgba(255, 64, 64, 0.4);
      }

      #btn-primary-red:hover {
        box-shadow: 0 10px 25px rgba(255, 64, 64, 0.5);
      }

      .app-tag {
        box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
      }

      footer {
        box-shadow: 0 -10px 25px rgba(255, 255, 255, 0.15);
      }

      .loader {
        border: 5px solid rgba(255, 255, 255, 0.1);
        border-top-color: var(--color-accent);
      }
    }

    /* ===== 响应式设计 ===== */
    @media (max-width: 768px) {
      .hero {
        align-items: flex-start;
        justify-content: center;
        padding-top: calc(60px + env(safe-area-inset-top) + 24px);
        padding-bottom: 2rem;
        min-height: 0;
      }

      .hero h1 {
        font-size: 2.2rem;
      }

      .hero-app {
        flex-direction: column;
        text-align: center;
      }

      .apps-grid {
        grid-template-columns: 1fr;
        gap: 2rem;
      }

      .editor-choice {
        grid-template-columns: 1fr;
      }

      .editor-card {
        flex-direction: column;
        text-align: center;
      }

      .hero-app-actions {
        flex-direction: column;
      }

      .new-releases-wrap {
        padding: 0 2.5rem;
      }
    }

    /* ===== 字体定义 ===== */
    @font-face {
      font-family: "IBM3270";
      src: url("../../Assets/Font/IBM-3270.ttf") format("truetype");
    }

    @font-face {
      font-family: "Ndot";
      src: url("../../Assets/Font/Ndot-77-JP-Extended-Regular.ttf") format("truetype");
    }

    @font-face {
      font-family: "Orbitron";
      src: url("../../Assets/Font/Orbitron.ttf") format("truetype");
    }
  </style>
</head>

<body>
  <div id="page-loader">
    <div class="loader"></div>
  </div>

  <header>
    <div class="container">
      <a href="#top" style="font-family: 'Orbitron', sans-serif; font-weight: bold">WYWDYX
        <span style="color: var(--color-glow-text); text-shadow: 0 0 5px var(--color-glow-light), 0 0 10px var(--color-glow-light)"
          >STORE</span
        ></a>
      <nav class="hidden md:flex">
        <a href="#featured">精选</a>
        <a href="#categories">分类</a>
        <a href="#apps">应用</a>
        <a href="#games">游戏</a>
      </nav>
      <a href="#" class="btn-primary">登录</a>
    </div>
  </header>

  <section class="hero" id="hero">
    <!-- 背景层将由JavaScript动态生成 -->
    <div class="hero-content">
      <h1>探索无限可能</h1>
      <p>WYWDYX STORE 提供精选应用，为您的设备增添强大功能与卓越体验</p>

      <div class="hero-card">
        <div class="hero-app">
          <img src="" alt="应用图标" class="hero-app-icon" />
          <div class="hero-app-info">
            <h2></h2>
            <p></p>
          </div>
        </div>
        <div class="hero-app-actions">
          <a href="#" class="btn-primary" id="btn-primary-red">了解更多</a>
          <a href="#" class="btn-primary">立即下载</a>
        </div>
      </div>

      <div class="hero-nav">
        <!-- 导航按钮将由JavaScript动态生成 -->
      </div>
    </div>
  </section>

  <div class="search-container">
    <input type="text" class="search-box" placeholder="搜索应用、游戏、内容..." />
  </div>

  <h2 class="section-title anchor-target" id="featured">新品上线</h2>
  <div class="new-releases-wrap">
    <button class="carousel-btn prev" aria-label="上一页">&#8249;</button>
    <div class="new-releases">
      <!-- 新品上线内容将由JavaScript动态生成 -->
    </div>
    <button class="carousel-btn next" aria-label="下一页">&#8250;</button>
  </div>

  <h2 class="section-title">编辑推荐</h2>
  <div class="editor-choice">
    <!-- 编辑推荐内容将由JavaScript动态生成 -->
  </div>

  <!-- 将筛选标签移动到精选应用上面 -->
  <div class="categories" id="categories">
    <button class="category-btn active">全部</button>
    <button class="category-btn">音乐</button>
    <button class="category-btn">展示</button>
    <button class="category-btn">P3R</button>
    <button class="category-btn">搞笑</button>
  </div>

  <h2 class="section-title">精选应用</h2>
  <section id="apps">
    <div class="apps-grid">
      <!-- 应用卡片 1 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square_Red.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">AEGIS</h3>
        <p class="app-description">
          用于展示歌曲Memories of You -Living with Determination Arrangement的专用 Android 应用。
        </p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">P3R</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>

      <!-- 应用卡片 2 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">JGD</h3>
        <p class="app-description">用于展示歌曲江国督の私密的专用的专用 Android 应用。</p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">搞笑</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>

      <!-- 应用卡片 3 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square_Red.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">AEGIS</h3>
        <p class="app-description">
          用于展示歌曲Memories of You -Living with Determination Arrangement的专用 Android 应用。
        </p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">P3R</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>

      <!-- 应用卡片 4 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">JGD</h3>
        <p class="app-description">用于展示歌曲江国督の私密的专用的专用 Android 应用。</p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">搞笑</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>

      <!-- 应用卡片 5 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square_Red.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">AEGIS</h3>
        <p class="app-description">
          用于展示歌曲Memories of You -Living with Determination Arrangement的专用 Android 应用。
        </p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">P3R</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>

      <!-- 应用卡片 6 -->
      <div class="app-card">
        <img src="../Assets/Images/Logo - Square.svg" alt="应用图标" class="app-icon" />
        <h3 class="app-title">JGD</h3>
        <p class="app-description">用于展示歌曲江国督の私密的专用的专用 Android 应用。</p>
        <div class="app-tags">
          <span class="app-tag">音乐</span>
          <span class="app-tag">展示</span>
          <span class="app-tag">搞笑</span>
        </div>
        <div class="app-actions">
          <button class="app-details-btn">详情</button>
          <button class="app-download-btn">下载</button>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <p>© 2025 <span style="color: var(--color-glow-text); text-shadow: 0 0 5px var(--color-glow-light), 0 0 10px var(--color-glow-light)">wywdyx</span></p>
  </footer>

  <script>
// ===== 工具函数 =====
const $ = (sel, root = document) => root.querySelector(sel);
const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

// ===== 页面加载后初始化 =====
window.addEventListener("load", () => {
  const loader = $("#page-loader");
  if (loader) {
    setTimeout(() => loader.classList.add("hidden"), 300);
  }
  initPageContent();
});

// ===== 数据：轮播 / 新品 / 编辑推荐 =====
const slides = [
  {
    title: "AEGIS",
    description:
      "用于展示歌曲Memories of You -Living with Determination Arrangement的专用 Android 应用。",
    background: "../Assets/Images/AppStore/AEGIS/tabletScreenshot.jpg",
    icon: "../Assets/Images/Logo - Square_Red.svg",
    downloadLink: "#download-AEGIS",
    detailLink: "Appinfo.html?app=AEGIS",
  },
  {
    title: "JGD",
    description: "用于展示歌曲江国督の私密的专用 Android 应用。",
    background: "../Assets/Images/AppStore/JGD/tabletScreenshot.jpg",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-JGD",
    detailLink: "Appinfo.html?app=JGD",
  },
];

const newReleasesData = [
  {
    title: "AEGIS",
    category: "应用 · 展示 · P3R",
    icon: "../Assets/Images/Logo - Square_Red.svg",
    downloadLink: "#download-AEGIS",
  },
  {
    title: "JGD",
    category: "音乐 · 展示 · 搞笑",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-JGD",
  },
  {
    title: "TikTok",
    category: "娱乐 · 视频",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-tiktok",
  },
  {
    title: "Spotify",
    category: "音乐 · 娱乐",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-spotify",
  },
  {
    title: "Zoom",
    category: "工具 · 商务",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-zoom",
  },
];

const editorChoiceData = [
  {
    title: "AEGIS",
    description:
      "用于展示歌曲Memories of You -Living with Determination Arrangement的专用 Android 应用。",
    icon: "../Assets/Images/Logo - Square_Red.svg",
    downloadLink: "#download-lightroom",
  },
  {
    title: "JGD",
    description: "用于展示歌曲江国督の私密的专用 Android 应用。",
    icon: "../Assets/Images/Logo - Square.svg",
    downloadLink: "#download-spotify",
  },
];

let currentSlide = 0;
let heroInterval = null;

// ===== 工具：根据屏幕方向替换文件名 tablet ↔ phone =====
function adaptHeroImage(url, isPortrait) {
  if (!url) return url;

  const parts = url.split("/");
  const filename = parts.pop(); // 取出最后的文件名
  let newFilename = filename;

  if (isPortrait) {
    newFilename = filename.replace("tablet", "phone");
  } else {
    newFilename = filename.replace("phone", "tablet");
  }

  parts.push(newFilename);
  return parts.join("/");
}

// ===== 主初始化 =====
function initPageContent() {
  initHeroSection();
  initNewReleases();
  initEditorChoice();
  initScrollAnimations();
  initFilters();
  ensureAnchors();

  // 监听屏幕方向变化，实时更新 Hero 背景
  window
    .matchMedia("(orientation: portrait)")
    .addEventListener("change", () => {
      updateHeroSlide(currentSlide);
    });
}

// ===== Hero 区域 =====
function initHeroSection() {
  const heroSection = $("#hero");
  const heroNav = $(".hero-nav");
  if (!heroSection || !heroNav) return;

  // 背景层 & 导航点
  slides.forEach((slide, index) => {
    const bgDiv = document.createElement("div");
    bgDiv.className = "hero-bg";
    if (index === 0) bgDiv.classList.add("active");
    heroSection.appendChild(bgDiv);

    const navBtn = document.createElement("button");
    navBtn.className = "hero-nav-btn";
    if (index === 0) navBtn.classList.add("active");
    navBtn.addEventListener("click", () => updateHeroSlide(index, true));
    heroNav.appendChild(navBtn);
  });

  // 初始激活
  updateHeroSlide(0);

  // 自动轮播
  if (heroInterval) clearInterval(heroInterval);
  heroInterval = setInterval(() => {
    const next = (currentSlide + 1) % slides.length;
    updateHeroSlide(next);
  }, 6000);
}

// 用 WAAPI 为 hero-card 提供“高度丝滑过渡”
function animateCardSize(element, mutate) {
  if (!element || typeof mutate !== "function") return;
  const firstHeight = element.getBoundingClientRect().height;

  mutate(); // 更新内容

  const lastHeight = element.getBoundingClientRect().height;
  if (firstHeight === lastHeight) return;

  element.style.overflow = "hidden";
  const anim = element.animate(
    [{ height: `${firstHeight}px` }, { height: `${lastHeight}px` }],
    { duration: 400, easing: "ease-in-out" }
  );
  anim.onfinish = () => {
    element.style.height = "";
    element.style.overflow = "";
  };
}

function updateHeroSlide(index, userTriggered = false) {
  const slide = slides[index];
  if (!slide) return;

  const isPortrait = window.matchMedia("(orientation: portrait)").matches;
  const heroBgs = $$(".hero-bg");
  const heroNavBtns = $$(".hero-nav-btn");
  const heroTitle = $(".hero h1");
  const heroDesc = $(".hero p");
  const heroCard = $(".hero-card");
  const heroIcon = $(".hero-app-icon");
  const heroAppInfo = $(".hero-app-info");
  const heroActions = $(".hero-app-actions");
  const learnMoreBtn = $(".hero-app-actions a:first-child");
  const downloadBtn = $(".hero-app-actions a:last-child");

  // 切换背景与导航点
  heroBgs.forEach((bg) => bg.classList.remove("active"));
  heroNavBtns.forEach((btn) => btn.classList.remove("active"));
  if (heroBgs[index]) {
    heroBgs[index].style.backgroundImage = `url(${adaptHeroImage(
      slide.background,
      isPortrait
    )})`;
    heroBgs[index].classList.add("active");
  }
  if (heroNavBtns[index]) heroNavBtns[index].classList.add("active");

  // 卡片尺寸平滑变化 + 内容更新
  animateCardSize(heroCard, () => {
    if (heroTitle) heroTitle.textContent = "探索无限可能";
    if (heroDesc)
      heroDesc.textContent =
        "WYWDYX STORE 提供精选应用，为您的设备增添强大功能与卓越体验";
    const h2 = $(".hero-app-info h2");
    const p = $(".hero-app-info p");
    if (h2) h2.textContent = slide.title;
    if (p) p.textContent = slide.description;
    if (heroIcon) {
      heroIcon.src = slide.icon;
      heroIcon.alt = `${slide.title} 图标`;
    }
    if (learnMoreBtn) learnMoreBtn.href = slide.detailLink;
    if (downloadBtn) downloadBtn.href = slide.downloadLink;
  });

  // 重置入场动画
  [heroTitle, heroDesc, heroCard, heroIcon, heroAppInfo, heroActions].forEach(
    (el) => el && el.classList.remove("active")
  );

  setTimeout(() => {
    [heroTitle, heroDesc, heroCard, heroIcon, heroAppInfo, heroActions].forEach(
      (el) => el && el.classList.add("active")
    );
  }, 60);

  currentSlide = index;

  // 手动切换重置自动轮播
  if (userTriggered && heroInterval) {
    clearInterval(heroInterval);
    heroInterval = setInterval(() => {
      const next = (currentSlide + 1) % slides.length;
      updateHeroSlide(next);
    }, 6000);
  }
}

// ===== 新品上线（横向滑动 + 拖拽） =====
function initNewReleases() {
  const newReleases = $(".new-releases");
  const prevBtn = $(".carousel-btn.prev");
  const nextBtn = $(".carousel-btn.next");
  if (!newReleases || !prevBtn || !nextBtn) return;

  newReleasesData.forEach((app, index) => {
    const appEl = document.createElement("div");
    appEl.className = "new-app";
    appEl.innerHTML = `
      <img src="${app.icon}" alt="${app.title} 图标" class="new-app-icon" />
      <div class="new-app-info">
        <h3 class="new-app-title">${app.title}</h3>
        <p class="new-app-category">${app.category}</p>
        <button class="new-app-download">下载</button>
      </div>`;
    newReleases.appendChild(appEl);

    setTimeout(() => appEl.classList.add("active"), index * 120);
  });

  const cardWidth = 300 + 24;
  const scrollByAmount = () =>
    Math.max(cardWidth, newReleases.clientWidth * 0.9);

  prevBtn.addEventListener("click", () => {
    newReleases.scrollBy({ left: -scrollByAmount(), behavior: "smooth" });
  });
  nextBtn.addEventListener("click", () => {
    newReleases.scrollBy({ left: scrollByAmount(), behavior: "smooth" });
  });

  // 拖拽滑动
  let isDown = false;
  let startX = 0;
  let scrollLeft = 0;

  newReleases.addEventListener("pointerdown", (e) => {
    isDown = true;
    startX = e.clientX;
    scrollLeft = newReleases.scrollLeft;
    if (e.pointerId != null) newReleases.setPointerCapture(e.pointerId);
  });

  newReleases.addEventListener("pointermove", (e) => {
    if (!isDown) return;
    const dx = e.clientX - startX;
    newReleases.scrollLeft = scrollLeft - dx;
  });

  const endDrag = () => (isDown = false);
  newReleases.addEventListener("pointerup", endDrag);
  newReleases.addEventListener("pointercancel", endDrag);
  newReleases.addEventListener("pointerleave", endDrag);
}

// ===== 编辑推荐 =====
function initEditorChoice() {
  const editorChoice = $(".editor-choice");
  if (!editorChoice) return;

  editorChoiceData.forEach((app, index) => {
    const appEl = document.createElement("div");
    appEl.className = "editor-card";
    appEl.innerHTML = `
      <img src="${app.icon}" alt="${app.title} 图标" class="editor-app-icon" />
      <div class="editor-app-info">
        <h3>${app.title}</h3>
        <p>${app.description}</p>
        <button class="app-download-btn">下载</button>
      </div>`;
    editorChoice.appendChild(appEl);

    setTimeout(() => appEl.classList.add("active"), index * 160);
  });
}

// ===== 滚动进入动画 =====
function initScrollAnimations() {
  const cards = $$(".app-card");
  if (!cards.length) return;

  const io = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("show");
          io.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.15 }
  );

  cards.forEach((card, idx) => {
    card.style.transitionDelay = (idx % 6) * 30 + "ms";
    io.observe(card);
  });
}

// ===== 分类筛选 =====
function initFilters() {
  const categoryButtons = $$(".category-btn");
  const appCards = $$(".app-card");
  if (!categoryButtons.length || !appCards.length) return;

  categoryButtons.forEach((button) => {
    button.addEventListener("click", () => {
      categoryButtons.forEach((b) => b.classList.remove("active"));
      button.classList.add("active");

      const category = button.textContent.trim();
      appCards.forEach((card) => {
        if (category === "全部") {
          card.style.display = "flex";
          requestAnimationFrame(() => card.classList.add("show"));
        } else {
          const tags = $$(".app-tag", card).map((t) => t.textContent.trim());
          const visible = tags.includes(category);
          card.style.display = visible ? "flex" : "none";
          if (visible) requestAnimationFrame(() => card.classList.add("show"));
        }
      });
    });
  });
}

// ===== 兜底：补 anchor 避免跳空 =====
function ensureAnchors() {
  if (!document.getElementById("games")) {
    const anchor = document.createElement("div");
    anchor.id = "games";
    anchor.className = "anchor-target";
    document.body.appendChild(anchor);
  }
}
  </script>
</body>
</html>
